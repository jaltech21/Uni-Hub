// socket.io-client@0.9.16 downloaded from https://ga.jspm.io/npm:socket.io-client@0.9.16/lib/io.js

import _xmlhttprequest from"xmlhttprequest";import{d as dew$9}from"../_/4913fb82.js";import _fs from"fs";import _uglifyJs from"uglify-js";import _activeXObfuscator from"active-x-obfuscator";import _process from"process";var exports={},_dewExec=false;function dew(){if(_dewExec)return exports;_dewExec=true;(function(e,t){var o=e.util={};var n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];o.parseUri=function(e){var t=n.exec(e||""),o={},a=14;while(a--)o[r[a]]=t[a]||"";return o};o.uniqueUri=function(e){var o=e.protocol,n=e.host,r=e.port;if("document"in t){n=n||document.domain;r=r||("https"==o&&"https:"!==document.location.protocol?443:document.location.port)}else{n=n||"localhost";r||"https"!=o||(r=443)}return(o||"http")+"://"+n+":"+(r||80)};o.query=function(e,t){var n=o.chunkQuery(e||""),r=[];o.merge(n,o.chunkQuery(t||""));for(var a in n)n.hasOwnProperty(a)&&r.push(a+"="+n[a]);return r.length?"?"+r.join("&"):""};o.chunkQuery=function(e){var t={},o=e.split("&"),n=0,r=o.length,a;for(;n<r;++n){a=o[n].split("=");a[0]&&(t[a[0]]=a[1])}return t};var a=false;o.load=function(e){if("document"in t&&"complete"===document.readyState||a)return e();o.on(t,"load",e,false)};o.on=function(e,t,o,n){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener&&e.addEventListener(t,o,n)};o.request=function(e){var t=_xmlhttprequest.XMLHttpRequest;return new t;if(e&&"undefined"!=typeof XDomainRequest&&!o.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof t&&(!e||o.ua.hasCORS))return new t;if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null};"undefined"!=typeof window&&o.load((function(){a=true}));o.defer=function(e){if(!o.ua.webkit||"undefined"!=typeof importScripts)return e();o.load((function(){setTimeout(e,100)}))};o.merge=function merge(e,t,n,r){var a=r||[],s="undefined"==typeof n?2:n,i;for(i in t)if(t.hasOwnProperty(i)&&o.indexOf(a,i)<0)if("object"===typeof e[i]&&s)o.merge(e[i],t[i],s-1,a);else{e[i]=t[i];a.push(t[i])}return e};o.mixin=function(e,t){o.merge(e.prototype,t.prototype)};o.inherit=function(e,t){function f(){}f.prototype=t.prototype;e.prototype=new f};o.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.intersect=function(e,t){var n=[],r=e.length>t.length?e:t,a=e.length>t.length?t:e;for(var s=0,i=a.length;s<i;s++)~o.indexOf(r,a[s])&&n.push(a[s]);return n};o.indexOf=function(e,t,o){for(var n=e.length,o=o<0?o+n<0?0:o+n:o||0;o<n&&e[o]!==t;o++);return n<=o?-1:o};o.toArray=function(e){var t=[];for(var o=0,n=e.length;o<n;o++)t.push(e[o]);return t};o.ua={};o.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(e){return false}return void 0!=e.withCredentials}();o.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);o.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:exports,exports);return exports}var exports$1={},_dewExec$1=false;function dew$1(){if(_dewExec$1)return exports$1;_dewExec$1=true;(function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var o,n,r,a,s=gap,i,l=t[e];l instanceof Date&&(l=date(e));"function"===typeof rep&&(l=rep.call(t,e,l));switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";gap+=indent;i=[];if("[object Array]"===Object.prototype.toString.apply(l)){a=l.length;for(o=0;o<a;o+=1)i[o]=str(o,l)||"null";r=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]";gap=s;return r}if(rep&&"object"===typeof rep){a=rep.length;for(o=0;o<a;o+=1)if("string"===typeof rep[o]){n=rep[o];r=str(n,l);r&&i.push(quote(n)+(gap?": ":":")+r)}}else for(n in l)if(Object.prototype.hasOwnProperty.call(l,n)){r=str(n,l);r&&i.push(quote(n)+(gap?": ":":")+r)}r=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}";gap=s;return r}}JSON.stringify=function(e,t,o){var n;gap="";indent="";if("number"===typeof o)for(n=0;n<o;n+=1)indent+=" ";else"string"===typeof o&&(indent=o);rep=t;if(t&&"function"!==typeof t&&("object"!==typeof t||"number"!==typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})};JSON.parse=function(text,reviver){var j;function walk(e,t){var o,n,r=e[t];if(r&&"object"===typeof r)for(o in r)if(Object.prototype.hasOwnProperty.call(r,o)){n=walk(r,o);void 0!==n?r[o]=n:delete r[o]}return reviver.call(e,t,r)}text=String(text);cx.lastIndex=0;cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return"function"===typeof reviver?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}})("undefined"!=typeof io?io:exports$1,"undefined"!==typeof JSON?JSON:void 0);return exports$1}var exports$2={},_dewExec$2=false;function dew$2(){if(_dewExec$2)return exports$2;_dewExec$2=true;(function(e,t){var o=e.parser={};var n=o.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var r=o.reasons=["transport not supported","client not handshaken","unauthorized"];var a=o.advice=["reconnect"];var s=t.JSON,i=t.util.indexOf;o.encodePacket=function(e){var t=i(n,e.type),o=e.id||"",l=e.endpoint||"",c=e.ack,p=null;switch(e.type){case"error":var u=e.reason?i(r,e.reason):"",h=e.advice?i(a,e.advice):"";""===u&&""===h||(p=u+(""!==h?"+"+h:""));break;case"message":""!==e.data&&(p=e.data);break;case"event":var d={name:e.name};e.args&&e.args.length&&(d.args=e.args);p=s.stringify(d);break;case"json":p=s.stringify(e.data);break;case"connect":e.qs&&(p=e.qs);break;case"ack":p=e.ackId+(e.args&&e.args.length?"+"+s.stringify(e.args):"");break}var g=[t,o+("data"==c?"+":""),l];null!==p&&void 0!==p&&g.push(p);return g.join(":")};o.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var o=0,n=e.length;o<n;o++){var r=e[o];t+="�"+r.length+"�"+e[o]}return t};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;o.decodePacket=function(e){var t=e.match(l);if(!t)return{};var o=t[2]||"",e=t[5]||"",i={type:n[t[1]],endpoint:t[4]||""};if(o){i.id=o;t[3]?i.ack="data":i.ack=true}switch(i.type){case"error":var t=e.split("+");i.reason=r[t[0]]||"";i.advice=a[t[1]]||"";break;case"message":i.data=e||"";break;case"event":try{var c=s.parse(e);i.name=c.name;i.args=c.args}catch(e){}i.args=i.args||[];break;case"json":try{i.data=s.parse(e)}catch(e){}break;case"connect":i.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){i.ackId=t[1];i.args=[];if(t[3])try{i.args=t[3]?s.parse(t[3]):[]}catch(e){}}break;case"disconnect":case"heartbeat":break}return i};o.decodePayload=function(e){if("�"==e.charAt(0)){var t=[];for(var n=1,r="";n<e.length;n++)if("�"==e.charAt(n)){t.push(o.decodePacket(e.substr(n+1).substr(0,r)));n+=Number(r)+1;r=""}else r+=e.charAt(n);return t}return[o.decodePacket(e)]}})("undefined"!=typeof io?io:exports$2,"undefined"!=typeof io?io:(void 0).exports);return exports$2}var exports$3={},_dewExec$3=false;var _global="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;function dew$3(){if(_dewExec$3)return exports$3;_dewExec$3=true;(function(e,t){e.EventEmitter=EventEmitter;function EventEmitter(){}EventEmitter.prototype.on=function(e,o){(this||_global).$events||((this||_global).$events={});(this||_global).$events[e]?t.util.isArray((this||_global).$events[e])?(this||_global).$events[e].push(o):(this||_global).$events[e]=[(this||_global).$events[e],o]:(this||_global).$events[e]=o;return this||_global};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(e,t){var o=this||_global;function on(){o.removeListener(e,on);t.apply(this||_global,arguments)}on.listener=t;this.on(e,on);return this||_global};EventEmitter.prototype.removeListener=function(e,o){if((this||_global).$events&&(this||_global).$events[e]){var n=(this||_global).$events[e];if(t.util.isArray(n)){var r=-1;for(var a=0,s=n.length;a<s;a++)if(n[a]===o||n[a].listener&&n[a].listener===o){r=a;break}if(r<0)return this||_global;n.splice(r,1);n.length||delete(this||_global).$events[e]}else(n===o||n.listener&&n.listener===o)&&delete(this||_global).$events[e]}return this||_global};EventEmitter.prototype.removeAllListeners=function(e){if(void 0===e){(this||_global).$events={};return this||_global}(this||_global).$events&&(this||_global).$events[e]&&((this||_global).$events[e]=null);return this||_global};EventEmitter.prototype.listeners=function(e){(this||_global).$events||((this||_global).$events={});(this||_global).$events[e]||((this||_global).$events[e]=[]);t.util.isArray((this||_global).$events[e])||((this||_global).$events[e]=[(this||_global).$events[e]]);return(this||_global).$events[e]};EventEmitter.prototype.emit=function(e){if(!(this||_global).$events)return false;var o=(this||_global).$events[e];if(!o)return false;var n=Array.prototype.slice.call(arguments,1);if("function"==typeof o)o.apply(this||_global,n);else{if(!t.util.isArray(o))return false;var r=o.slice();for(var a=0,s=r.length;a<s;a++)r[a].apply(this||_global,n)}return true}})("undefined"!=typeof io?io:exports$3,"undefined"!=typeof io?io:(void 0).exports);return exports$3}var exports$4={},_dewExec$4=false;var _global$1="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;function dew$4(){if(_dewExec$4)return exports$4;_dewExec$4=true;(function(e,t){e.SocketNamespace=SocketNamespace;function SocketNamespace(e,t){(this||_global$1).socket=e;(this||_global$1).name=t||"";(this||_global$1).flags={};(this||_global$1).json=new Flag(this||_global$1,"json");(this||_global$1).ackPackets=0;(this||_global$1).acks={}}t.util.mixin(SocketNamespace,t.EventEmitter);SocketNamespace.prototype.$emit=t.EventEmitter.prototype.emit;SocketNamespace.prototype.of=function(){return(this||_global$1).socket.of.apply((this||_global$1).socket,arguments)};SocketNamespace.prototype.packet=function(e){e.endpoint=(this||_global$1).name;(this||_global$1).socket.packet(e);(this||_global$1).flags={};return this||_global$1};SocketNamespace.prototype.send=function(e,t){var o={type:(this||_global$1).flags.json?"json":"message",data:e};if("function"==typeof t){o.id=++(this||_global$1).ackPackets;o.ack=true;(this||_global$1).acks[o.id]=t}return this.packet(o)};SocketNamespace.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),o=t[t.length-1],n={type:"event",name:e};if("function"==typeof o){n.id=++(this||_global$1).ackPackets;n.ack="data";(this||_global$1).acks[n.id]=o;t=t.slice(0,t.length-1)}n.args=t;return this.packet(n)};SocketNamespace.prototype.disconnect=function(){if(""===(this||_global$1).name)(this||_global$1).socket.disconnect();else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this||_global$1};SocketNamespace.prototype.onPacket=function(e){var o=this||_global$1;function ack(){o.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===(this||_global$1).name?(this||_global$1).socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var n=["message",e.data];"data"==e.ack?n.push(ack):e.ack&&this.packet({type:"ack",ackId:e.id});(this||_global$1).$emit.apply(this||_global$1,n);break;case"event":var n=[e.name].concat(e.args);"data"==e.ack&&n.push(ack);(this||_global$1).$emit.apply(this||_global$1,n);break;case"ack":if((this||_global$1).acks[e.ackId]){(this||_global$1).acks[e.ackId].apply(this||_global$1,e.args);delete(this||_global$1).acks[e.ackId]}break;case"error":e.advice?(this||_global$1).socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason);break}};function Flag(e,t){(this||_global$1).namespace=e;(this||_global$1).name=t}Flag.prototype.send=function(){(this||_global$1).namespace.flags[(this||_global$1).name]=true;(this||_global$1).namespace.send.apply((this||_global$1).namespace,arguments)};Flag.prototype.emit=function(){(this||_global$1).namespace.flags[(this||_global$1).name]=true;(this||_global$1).namespace.emit.apply((this||_global$1).namespace,arguments)}})("undefined"!=typeof io?io:exports$4,"undefined"!=typeof io?io:(void 0).exports);return exports$4}var exports$5={},_dewExec$5=false;var _global$2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;function dew$5(){if(_dewExec$5)return exports$5;_dewExec$5=true;(function(e,t){e.Transport=Transport;function Transport(e,t){(this||_global$2).socket=e;(this||_global$2).sessid=t}t.util.mixin(Transport,t.EventEmitter);Transport.prototype.heartbeats=function(){return true};Transport.prototype.onData=function(e){this.clearCloseTimeout();((this||_global$2).socket.connected||(this||_global$2).socket.connecting||(this||_global$2).socket.reconnecting)&&this.setCloseTimeout();if(""!==e){var o=t.parser.decodePayload(e);if(o&&o.length)for(var n=0,r=o.length;n<r;n++)this.onPacket(o[n])}return this||_global$2};Transport.prototype.onPacket=function(e){(this||_global$2).socket.setHeartbeatTimeout();if("heartbeat"==e.type)return this.onHeartbeat();"connect"==e.type&&""==e.endpoint&&this.onConnect();"error"==e.type&&"reconnect"==e.advice&&((this||_global$2).isOpen=false);(this||_global$2).socket.onPacket(e);return this||_global$2};Transport.prototype.setCloseTimeout=function(){if(!(this||_global$2).closeTimeout){var e=this||_global$2;(this||_global$2).closeTimeout=setTimeout((function(){e.onDisconnect()}),(this||_global$2).socket.closeTimeout)}};Transport.prototype.onDisconnect=function(){(this||_global$2).isOpen&&this.close();this.clearTimeouts();(this||_global$2).socket.onDisconnect();return this||_global$2};Transport.prototype.onConnect=function(){(this||_global$2).socket.onConnect();return this||_global$2};Transport.prototype.clearCloseTimeout=function(){if((this||_global$2).closeTimeout){clearTimeout((this||_global$2).closeTimeout);(this||_global$2).closeTimeout=null}};Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout();(this||_global$2).reopenTimeout&&clearTimeout((this||_global$2).reopenTimeout)};Transport.prototype.packet=function(e){this.send(t.parser.encodePacket(e))};Transport.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})};Transport.prototype.onOpen=function(){(this||_global$2).isOpen=true;this.clearCloseTimeout();(this||_global$2).socket.onOpen()};Transport.prototype.onClose=function(){var e=this||_global$2;(this||_global$2).isOpen=false;(this||_global$2).socket.onClose();this.onDisconnect()};Transport.prototype.prepareUrl=function(){var e=(this||_global$2).socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+(this||_global$2).name+"/"+(this||_global$2).sessid};Transport.prototype.ready=function(e,t){t.call(this||_global$2)}})("undefined"!=typeof io?io:exports$5,"undefined"!=typeof io?io:(void 0).exports);return exports$5}var exports$6={},_dewExec$6=false;var _global$3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;function dew$6(){if(_dewExec$6)return exports$6;_dewExec$6=true;(function(e,t,o){e.XHR=XHR;function XHR(e){if(e){t.Transport.apply(this||_global$3,arguments);(this||_global$3).sendBuffer=[]}}t.util.inherit(XHR,t.Transport);XHR.prototype.open=function(){(this||_global$3).socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this||_global$3};XHR.prototype.payload=function(e){var o=[];for(var n=0,r=e.length;n<r;n++)o.push(t.parser.encodePacket(e[n]));this.send(t.parser.encodePayload(o))};XHR.prototype.send=function(e){this.post(e);return this||_global$3};function empty(){}XHR.prototype.post=function(e){var t=this||_global$3;(this||_global$3).socket.setBuffer(true);function stateChange(){if(4==(this||_global$3).readyState){(this||_global$3).onreadystatechange=empty;t.posting=false;200==(this||_global$3).status?t.socket.setBuffer(false):t.onClose()}}function onload(){(this||_global$3).onload=empty;t.socket.setBuffer(false)}(this||_global$3).sendXHR=this.request("POST");o.XDomainRequest&&(this||_global$3).sendXHR instanceof XDomainRequest?(this||_global$3).sendXHR.onload=(this||_global$3).sendXHR.onerror=onload:(this||_global$3).sendXHR.onreadystatechange=stateChange;(this||_global$3).sendXHR.send(e)};XHR.prototype.close=function(){this.onClose();return this||_global$3};XHR.prototype.request=function(e){var o=t.util.request((this||_global$3).socket.isXDomain()),n=t.util.query((this||_global$3).socket.options.query,"t="+ +new Date);o.open(e||"GET",this.prepareUrl()+n,true);if("POST"==e)try{o.setRequestHeader?o.setRequestHeader("Content-type","text/plain;charset=UTF-8"):o.contentType="text/plain"}catch(e){}return o};XHR.prototype.scheme=function(){return(this||_global$3).socket.options.secure?"https":"http"};XHR.check=function(e,n){try{var r=t.util.request(n),a=o.XDomainRequest&&r instanceof XDomainRequest,s=e&&e.options&&e.options.secure?"https:":"http:",i=o.location&&s!=o.location.protocol;if(r&&!(a&&i))return true}catch(e){}return false};XHR.xdomainCheck=function(e){return XHR.check(e,true)}})("undefined"!=typeof io?io.Transport:exports$6,"undefined"!=typeof io?io:(void 0).exports,exports$6);return exports$6}var exports$7={},_dewExec$7=false;function dew$7(){if(_dewExec$7)return exports$7;_dewExec$7=true;var e=_process;var t=_fs,o=dew$8(),n=_uglifyJs,r=_activeXObfuscator;var a="/*! Socket.IO.%ext% build:"+o.version+", %type%. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\n",s=a.replace("%type%","development").replace("%ext%","js"),i=a.replace("%type%","production").replace("%ext%","min.js");var l="// if node",c="// end node";var p=["io.js","util.js","events.js","json.js","parser.js","transport.js","socket.js","namespace.js"];var u={websocket:["transports/websocket.js"],flashsocket:["transports/websocket.js","transports/flashsocket.js","vendor/web-socket-js/swfobject.js","vendor/web-socket-js/web_socket.js"],htmlfile:["transports/xhr.js","transports/htmlfile.js"],"xhr-polling":["transports/xhr.js","transports/xhr-polling.js"],"jsonp-polling":["transports/xhr.js","transports/xhr-polling.js","transports/jsonp-polling.js"]};var h="\nvar io = ('undefined' === typeof module ? {} : module.exports);\n(function() {\n";var d='\nif (typeof define === "function" && define.amd) {'+"\n  define([], function () { return io; });"+"\n}\n})();";var g=exports$7=function(){var e,o,a,g=null,b=Array.prototype.slice.call(arguments,0),$={minify:true,node:false,custom:[]};b.forEach((function(t){var n=Object.prototype.toString.call(t).replace(/\[object\s(\w+)\]/gi,"$1").toLowerCase();switch(n){case"array":return e=t;case"object":return o=t;case"function":return a=t}}));o=o||{};e=e||Object.keys(u);for(var v in o)$[v]=o[v];var y=[];p.forEach((function(e){y.push(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname+"/../lib/"+e)}));e.forEach((function(e){var t=u[e];t?t.forEach((function(e){var t=new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname+"/../lib/"+e;~y.indexOf(t)||y.push(t)})):g="Unsupported transport `"+e+"` supplied as argument."}));if(g)return a(g);var m={};y.forEach((function(e){t.readFile(e,(function(t,o){t&&(g=t);m[e]=o;if(Object.keys(m).length===y.length){if(g)return a(g);var p=s,u=0;$.node||(p+=h);y.forEach((function(e){p+=m[e]}));$.custom.length&&$.custom.forEach((function(e){p+=e}));$.node||(p+=d);p=r(p);$.node||(p=p.split("\n").filter((function(e){var t=e.indexOf(l)>=0,o=e.indexOf(c)>=0,n=u;if(t){u++;n=u}o&&u--;return 0==n})).join("\n"));if($.minify){var b=n.parser.parse(p);b=n.uglify.ast_mangle(b);b=n.uglify.ast_squeeze(b);p=i+n.uglify.gen_code(b,{ascii_only:true})}a(g,p)}}))}))};g.version=o.version;g.transports=u;if(!void 0){var b=e.argv.slice(2);g(!!b.length&&b,{minify:false},(function(e,o){if(e)return console.error(e);t.write(t.openSync(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname+"/../dist/socket.io.js","w"),o,0,"utf8");console.log("Successfully generated the development build: socket.io.js")}));g(!!b.length&&b,(function(e,o){if(e)return console.error(e);t.write(t.openSync(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname+"/../dist/socket.io.min.js","w"),o,0,"utf8");console.log("Successfully generated the production build: socket.io.min.js")}))}return exports$7}var exports$8={},_dewExec$8=false;function dew$8(){if(_dewExec$8)return exports$8;_dewExec$8=true;(function(e,t){var o=e;o.version="0.9.16";o.protocol=1;o.transports=[];o.j=[];o.sockets={};o.util=dew().util;o.JSON=dew$1().JSON;o.parser=dew$2().parser;o.EventEmitter=dew$3().EventEmitter;o.SocketNamespace=dew$4().SocketNamespace;o.Transport=dew$5().Transport;o.transports=["websocket","xhr-polling"];o.Transport.XHR=dew$6().XHR;o.transports.forEach((function(e){o.Transport[e]=require("./transports/"+e)[e]}));o.Socket=dew$9().Socket;o.dist=new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname+"/../dist";o.builder=dew$7();o.connect=function(e,n){var r=o.util.parseUri(e),a,s;if(t&&t.location){r.protocol=r.protocol||t.location.protocol.slice(0,-1);r.host=r.host||(t.document?t.document.domain:t.location.hostname);r.port=r.port||t.location.port}a=o.util.uniqueUri(r);var i={host:r.host,secure:"https"==r.protocol,port:r.port||("https"==r.protocol?443:80),query:r.query||""};o.util.merge(i,n);!i["force new connection"]&&o.sockets[a]||(s=new o.Socket(i));!i["force new connection"]&&s&&(o.sockets[a]=s);s=s||o.sockets[a];return s.of(r.path.length>1?r.path:"")}})(exports$8,exports$8);return exports$8}var io$1=dew$8();export default io$1;export{dew$8 as __dew};

